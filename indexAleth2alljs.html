<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Space Invaders : the game</title>
	<link rel="stylesheet" type="text/css" href="">
	<link rel="shortcut icon" href="logospace.png">

	<style type="text/css">
	body {
		
		/*max-width: 1000px;*/
		/*height: 700px;*/
	   /* margin: 0;
	    padding: 0;*/
	    /*overflow: hidden;*/ /*pour ne pas sortir du cadre. no scroll*/

	}
	#conteneurgeneral {
		border: solid;
		 background-color: rgba(29, 52, 43, 0.62);
		 height: 700px;
		 width: 1010px;
	}
/*	#conteneuraliens {
		display: flex;
		flex-direction: row;
		
	}*/
	#conteneuraliens > div {
	/*	width: 50px;
		height: 50px;*/
		/*background-color: blue;*/
		/*margin: 3px;*/
		position: absolute;
	}
	
	#conteneurship > div {
		width: 100px;
		height: 50px;
		background-image : url('champion.png');
		background-size: cover;
		z-index: 20;
		/*margin: 100px 3px 3px 3px;*/
	}
	.aliens {
		width: 30px;
		height: 20px;
		/*background-color: blue;*/
	}
</style>
</head>
<body>
	<div id="conteneurgeneral">
		<div id="conteneuraliens" style="position: absolute">
					</div>
		<div id="conteneurship">
			<div id="hero" style="position: absolute"></div>
		</div>
		<button id="boutonUn" style="height: 30px"></button>
	</div>
	<!-- <script type="text/javascript" src="javAleth.js"></script> -->
	<script type="text/javascript">

		document.addEventListener('DOMContentLoaded', function (){ 

		
			let conteneurAlien = document.getElementById('conteneuraliens');
			let conteneurGeneral = document.getElementById('conteneurgeneral');
			let conteneurShip = document.getElementById('conteneurship');
		
		conteneurAlien.style.left = '10px';

		conteneurAlien.style.top = '10px';


/**************** balancier gauche-droite *****************/


//pour faire apparaitre les aliens:
let rows = 5;
let columns = 10;
let badGuySpace = 50;
for (let i = 0; i < rows; i++) {
for (let j = 0; j < columns; j++) {
let aliens = document.createElement("div");
aliens.className = 'aliens';
aliens.style.top = badGuySpace * i + "px";
aliens.style.left = badGuySpace * j + "px";
aliens.style.backgroundImage = 'url(logospace.png)';
aliens.style.backgroundSize = 'cover';


conteneurAlien.appendChild(aliens);


}
} 
let aliens = document.getElementsByClassName('aliens'); 


		var sens = 0;
		var descend = 0
		function MoveRightTheAliens() {
// var timeoutGoRight = setInterval("conteneurAlien.style.left = parseInt(carreUnLeft) + 122 + 'px'", 1000);
// var timeoutGoLeft = setTimeout("conteneurAlien.style.left = parseInt(carreUnLeft) - 122 + 'px'", 1000);
			let carreUnTop = parseInt(conteneurAlien.style.top);
			let carreUnLeft = parseInt(conteneurAlien.style.left);
			
	
			// carreUn = conteneurAlien.style.backgroundColor = "red";
			if (sens == 0) {
				// conteneurAlien.style.left = timeoutGoRight;
				var nextMoveUn = parseInt(carreUnLeft) + 25;
				
				if (nextMoveUn >= 600) {
					sens = 1; 
					conteneurAlien.style.top = (parseInt(carreUnTop) + 30 + "px");
				} else {
					conteneurAlien.style.left = nextMoveUn + "px";
				}
			} else if (sens ==1) {
				var nextMoveDeux = parseInt(carreUnLeft) - 25;
				if (nextMoveDeux <= 0) {
					sens = 0;
					conteneurAlien.style.top = (parseInt(carreUnTop) + 30 + "px");
				} else {
				conteneurAlien.style.left = parseInt(carreUnLeft) - 100 + "px";
			}

				
			}
			if (parseInt(conteneurAlien.style.top) > 550) {
			alert('game over!');

		}
		}
		setInterval(MoveRightTheAliens, 250);







		let heroShip = document.getElementById('hero');
		heroShip.style.top = '650px';
		heroShip.style.left = '500px';

		function moveTheHero(event){

			if (event.code == 'ArrowRight'){
				heroShip.style.left = (parseInt(heroShip.style.left) + 60 + "px");
			} else if (event.code == 'ArrowLeft') {
				heroShip.style.left = parseInt(heroShip.style.left) - 60 + "px";
			}console.log(heroShip)
		} 
		 
		document.addEventListener('keydown', moveTheHero);

// /******             misssiles           ****************/
let canonball;
canonball = 0;

		function tirDeMissile(event) {
			if (event.code == 'Space') {
				var missile = document.createElement('div');
				missile.id = 'divDesmissiles';
				missile.style.width= '20px';
				missile.style.height= '28px';
				// missile.style.backgroundColor = 'black';
				missile.style.backgroundImage= "url(flamme.png)";
				missile.style.backgroundSize = "cover";
				missile.style.position = 'absolute';
				missile.style.top = '645px';
				// missile.style.top = setInterval('parseInt(missile.style.top) - 50 + "px"', 1000);
				missile.style.left = parseInt(heroShip.style.left) + 54 + 'px';;

				conteneurship.appendChild(missile);
				setInterval(function() {monteeDuMissile(missile)}, 200);

			}

		}
		
		document.addEventListener('keydown', tirDeMissile);





// 		/****** code importé *********/

	
function monteeDuMissile(quelMissile) {
		quelMissile.style.top = parseInt(quelMissile.style.top) - 50 + "px";
		// boucle sur chaque alien - faire remove child plutôt que display none
		
};

let missile.y = missile.style.top;
let missile.height = missile.style.height ;
let missile.x = missile.style.left;
let missile.width = missile.style.width ;

// let aliens[0].style.top = parseInt(conteneurAlien.style.top) + parseInt(aliens[0].style.top);
// let aliens[0].style.left = parseInt(conteneurAlien.style.left) + parseInt(aliens[0].style.left);

function isCollide(a, b) {
    return !(
        ((a.y + a.height) < (b.y)) ||
        (a.y > (b.y + b.height)) ||
        ((a.x + a.width) < b.x) ||
        (a.x > (b.x + b.width))
    );
}
 

		function destroyAliens() {
		let aliens = document.getElementsByClassName("aliens");
// if (parseInt(conteneurAlien.style.left) == missile.style.left && conteneurAlien.style.top == conteneurAlien.style.top)
if (isCollide(missile, aliens[0])) {
conteneurAlien.removeChild(aliens[i]);
}
}


});//domcontentloaded

</script>
</body>
</html>